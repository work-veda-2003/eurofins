<div class="auth-container" *ngIf="!authService.currentUser()">

  <!-- Left Column: Forms -->
  <div class="form-section">
    <div class="form-container">

      <!-- Login Form View -->
      <div *ngIf="isLoginMode">
        <div class="form-header">Login</div>

        <div *ngIf="authError()" class="alert alert-error">{{ authError() }}</div>
        <div *ngIf="authSuccess()" class="alert alert-success">{{ authSuccess() }}</div>

        <form (ngSubmit)="onLogin()" #loginForm="ngForm">
          <div class="form-group">
            <label>Username or Email Address</label>
            <input type="text" name="username" [(ngModel)]="loginData.username" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" name="password" [(ngModel)]="loginData.password" required>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="remember">
            <label for="remember">Remember Me</label>
          </div>

          <button type="submit" class="btn-login" [disabled]="!loginForm.form.valid">Log In</button>
        </form>

        <div class="footer-links">
          <a href="javascript:void(0)">Lost Your Password?</a>
        </div>
      </div>

      <!-- Register Form View -->
      <div *ngIf="!isLoginMode">
        <div class="form-header">Register</div>

        <div *ngIf="authError()" class="alert alert-error">{{ authError() }}</div>

        <form (ngSubmit)="onRegister()" #regForm="ngForm">
          <div class="reg-grid">
            <div class="form-group">
              <label>Username</label>
              <input type="text" name="regUsername" [(ngModel)]="registerData.username" required>
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" name="regPassword" [(ngModel)]="registerData.password" required>
            </div>
            <div class="form-group">
              <label>First Name</label>
              <input type="text" name="firstName" [(ngModel)]="registerData.firstName" required>
            </div>
            <div class="form-group">
              <label>Last Name</label>
              <input type="text" name="lastName" [(ngModel)]="registerData.lastName" required>
            </div>
            <div class="form-group" style="grid-column: span 2;">
              <label>Email Address</label>
              <input type="email" name="email" [(ngModel)]="registerData.email" required>
            </div>
          </div>
          <button type="submit" class="btn-login" [disabled]="!regForm.form.valid">Create Account</button>
        </form>
      </div>

    </div>
  </div>

  <!-- Right Column: Splash -->
  <div class="splash-section">
    <h1>{{ isLoginMode ? 'Register' : 'Login' }}</h1>
    <p>{{ isLoginMode ? "Don't have an account? Register one!" : "Already have an account? Sign in!" }}</p>
    <button class="btn-outline" (click)="toggleMode()">
      {{ isLoginMode ? 'Register an Account' : 'Back to Login' }}
    </button>
  </div>

</div>

<!-- LOGGED IN VIEW -->
<div class="dashboard-container" *ngIf="authService.currentUser()">
  <div class="dash-header">
    <h2>Welcome, {{ authService.currentUser()?.firstName }}!</h2>
    <button class="btn-outline" (click)="onLogout()">Log Out</button>
  </div>

  <div class="user-list">
    <div *ngIf="authSuccess()" class="alert alert-success">{{ authSuccess() }}</div>

    <h3>Registered Members</h3>
    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
      <thead style="background: #f4f7f6; text-align: left;">
        <tr>
          <th style="padding: 1rem; border-bottom: 2px solid #ddd;">Name</th>
          <th style="padding: 1rem; border-bottom: 2px solid #ddd;">Email</th>
          <th style="padding: 1rem; border-bottom: 2px solid #ddd;">Username</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users()">
          <td style="padding: 1rem; border-bottom: 1px solid #eee;">{{ user.firstName }} {{ user.lastName }}</td>
          <td style="padding: 1rem; border-bottom: 1px solid #eee;">{{ user.email }}</td>
          <td style="padding: 1rem; border-bottom: 1px solid #eee;">@{{ user.username }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>